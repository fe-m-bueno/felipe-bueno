@import '@fontsource-variable/inter';
@import '@fontsource-variable/geist-mono';
@tailwind base;
@tailwind components;
@tailwind utilities;

html {
  height: -webkit-fill-available;
}

/* CSS custom properties para tema */
:root {
  color-scheme: light;
}

[data-mode='dark'] {
  color-scheme: dark;
}

body {
  min-height: 100dvh;
  min-height: -webkit-fill-available;
  position: relative;
  color: theme('colors.black');
}

/* Background containers - one for each theme, no transitions */
body::before,
body::after {
  content: '';
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: -1;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
}

/* Light mode background - visible by default */
body::before {
  background-image: url('/bg-main.webp');
  opacity: 1;
}

/* Dark mode background - hidden by default */
body::after {
  background-image: url('/bg-main-dark.webp');
  opacity: 0;
}

/* Dark mode: swap visibility instantly */
[data-mode='dark'] body::before {
  opacity: 0;
}

[data-mode='dark'] body::after {
  opacity: 1;
}

.dark body {
  color: theme('colors.white');
}

::selection {
  @apply bg-rose-500 text-white;
}

/* Wave animation for emoji - CSS-only, no JS overhead */
@keyframes wave {
  0%, 100% {
    transform: rotate(0deg);
  }
  10% {
    transform: rotate(14deg);
  }
  20% {
    transform: rotate(-8deg);
  }
  30% {
    transform: rotate(14deg);
  }
  40% {
    transform: rotate(-4deg);
  }
  50% {
    transform: rotate(10deg);
  }
  60%, 100% {
    transform: rotate(0deg);
  }
}

.animate-wave {
  animation: wave 2.5s ease-in-out infinite;
  transform-origin: 70% 70%;
  will-change: transform;
}

/* Respect user preference for reduced motion */
@media (prefers-reduced-motion: reduce) {
  .animate-wave {
    animation: none;
  }
  
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

/* MouseGradient - GPU accelerated with CSS variables */
.mouse-gradient {
  background: radial-gradient(
    circle at var(--mouse-x, 50%) var(--mouse-y, 50%),
    rgba(255, 105, 180, 0.3) 40px,
    transparent 140px
  );
  will-change: background;
}

/* Performance optimizations for transforms */
.will-change-transform {
  will-change: transform;
  backface-visibility: hidden;
  -webkit-backface-visibility: hidden;
}

/* Optimize backdrop-filter performance */
@supports (backdrop-filter: blur(1px)) {
  .backdrop-blur-xl {
    will-change: backdrop-filter;
  }
}

/* ==========================================
   Liquid Glass Effect
   ========================================== */

/* Base liquid glass styles */
.liquid-glass,
.liquid-glass-badge,
.liquid-glass-card {
  --mouse-x: 50%;
  --mouse-y: 50%;
  position: relative;
  overflow: hidden;
  isolation: isolate;
}

/* Animated border glow */
.liquid-glass::before,
.liquid-glass-badge::before,
.liquid-glass-card::before {
  content: '';
  position: absolute;
  inset: 0;
  padding: 1px;
  border-radius: inherit;
  background: conic-gradient(
    from var(--border-angle, 0deg),
    transparent 0%,
    rgba(244, 63, 94, 0.4) 10%,
    rgba(251, 113, 133, 0.6) 20%,
    transparent 30%,
    transparent 70%,
    rgba(244, 63, 94, 0.4) 80%,
    rgba(251, 113, 133, 0.6) 90%,
    transparent 100%
  );
  mask: 
    linear-gradient(#fff 0 0) content-box, 
    linear-gradient(#fff 0 0);
  mask-composite: exclude;
  -webkit-mask: 
    linear-gradient(#fff 0 0) content-box, 
    linear-gradient(#fff 0 0);
  -webkit-mask-composite: xor;
  opacity: 0;
  transition: opacity 0.3s ease;
  animation: border-rotate 4s linear infinite;
  pointer-events: none;
}

/* Mouse-following highlight effect */
.liquid-glass::after,
.liquid-glass-badge::after,
.liquid-glass-card::after {
  content: '';
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: radial-gradient(
    circle at var(--mouse-x) var(--mouse-y),
    rgba(251, 113, 133, 0.15) 0%,
    rgba(244, 63, 94, 0.08) 25%,
    transparent 50%
  );
  opacity: 0;
  transition: opacity 0.3s ease;
  pointer-events: none;
}

/* Active state when hovered */
.liquid-glass-active::before,
.liquid-glass-active::after {
  opacity: 1;
}

/* Badge variant - smaller, subtler effect */
.liquid-glass-badge {
  background: rgba(255, 255, 255, 0.85);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 9999px;
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 
    0 1px 2px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

.dark .liquid-glass-badge {
  background: rgba(0, 0, 0, 0.5);
  border-color: rgba(255, 255, 255, 0.15);
  box-shadow: 
    0 1px 2px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.liquid-glass-badge:hover {
  background: rgba(244, 63, 94, 0.8);
  color: white;
  border-color: rgba(244, 63, 94, 0.5);
  transform: translateY(-1px);
  box-shadow: 
    0 4px 12px rgba(244, 63, 94, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.2);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1), background 0.3s cubic-bezier(0.4, 0, 0.2, 1), color 0.3s cubic-bezier(0.4, 0, 0.2, 1), border-color 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.dark .liquid-glass-badge:hover {
  background: rgba(244, 63, 94, 0.8);
  border-color: rgba(244, 63, 94, 0.5);
}

/* Card variant - larger, more prominent effect */
.liquid-glass-card {
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(24px);
  -webkit-backdrop-filter: blur(24px);
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 1rem;
  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 
    0 4px 6px rgba(0, 0, 0, 0.05),
    0 10px 15px rgba(0, 0, 0, 0.03),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.dark .liquid-glass-card {
  background: rgba(255, 255, 255, 0.03);
  border-color: rgba(255, 255, 255, 0.1);
  box-shadow: 
    0 4px 6px rgba(0, 0, 0, 0.2),
    0 10px 15px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.liquid-glass-card:hover {
  background: rgba(255, 255, 255, 0.08);
  transform: translateY(-4px);
  box-shadow: 
    0 8px 25px rgba(244, 63, 94, 0.15),
    0 20px 40px rgba(0, 0, 0, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
  transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.4s cubic-bezier(0.4, 0, 0.2, 1), background 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.dark .liquid-glass-card:hover {
  background: rgba(255, 255, 255, 0.08);
  box-shadow: 
    0 8px 25px rgba(244, 63, 94, 0.2),
    0 20px 40px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* Default variant */
.liquid-glass {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(16px);
  -webkit-backdrop-filter: blur(16px);
  border: 1px solid rgba(0, 0, 0, 0.1);
  border-radius: 1.5rem;
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow: 
    0 2px 4px rgba(0, 0, 0, 0.05),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.dark .liquid-glass {
  background: rgba(255, 255, 255, 0.03);
  border-color: rgba(255, 255, 255, 0.1);
  box-shadow: 
    0 2px 4px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.05);
}

.liquid-glass:hover {
  background: rgba(255, 255, 255, 0.1);
  transform: translateY(-2px);
  box-shadow: 
    0 6px 20px rgba(244, 63, 94, 0.1),
    inset 0 1px 0 rgba(255, 255, 255, 0.15);
  transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s cubic-bezier(0.4, 0, 0.2, 1), background 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.dark .liquid-glass:hover {
  background: rgba(255, 255, 255, 0.08);
  box-shadow: 
    0 6px 20px rgba(244, 63, 94, 0.15),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

/* Border rotation animation */
@keyframes border-rotate {
  0% {
    --border-angle: 0deg;
  }
  100% {
    --border-angle: 360deg;
  }
}

/* Register custom property for animation */
@property --border-angle {
  syntax: '<angle>';
  initial-value: 0deg;
  inherits: false;
}

/* Respect user preference for reduced motion */
@media (prefers-reduced-motion: reduce) {
  .liquid-glass::before,
  .liquid-glass-badge::before,
  .liquid-glass-card::before {
    animation: none;
  }
  
  .liquid-glass,
  .liquid-glass-badge,
  .liquid-glass-card {
    transition: none;
  }
  
  .liquid-glass::after,
  .liquid-glass-badge::after,
  .liquid-glass-card::after {
    display: none;
  }
}
